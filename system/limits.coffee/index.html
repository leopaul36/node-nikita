<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Limits.coffee - node-nikita</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Limits.coffee";
    var mkdocs_page_input_path = "system/limits.coffee.md";
    var mkdocs_page_url = "/system/limits.coffee/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../context.coffee/" class="icon icon-home"> node-nikita</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../context.coffee/">Context.coffee</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../index.coffee/">Index.coffee</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../registry.coffee/">Registry.coffee</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Alt</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../alt/ldap_acl.coffee/">Ldap acl.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../alt/ldap_index.coffee/">Ldap index.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Connection</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../connection/assert.coffee/">Assert.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../connection/wait.coffee/">Wait.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Core</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core/assert.coffee/">Assert.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core/ping.coffee/">Ping.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Kv</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core/kv/engine.coffee/">Engine.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core/kv/get.coffee/">Get.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core/kv/set.coffee/">Set.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Engines</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core/kv/engines/memory.coffee/">Memory.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Cron</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../cron/add.coffee/">Add.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../cron/remove.coffee/">Remove.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Db</span></li>

        
            
    <ul class="subnav">
    <li><span>Database</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../db/database/exists.coffee/">Exists.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../db/database/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../db/database/remove.coffee/">Remove.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../db/database/wait.coffee/">Wait.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Schema</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../db/schema/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../db/schema/remove.coffee/">Remove.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>User</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../db/user/exists.coffee/">Exists.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../db/user/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../db/user/remove.coffee/">Remove.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Docker</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/build.coffee/">Build.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/checksum.coffee/">Checksum.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/cp.coffee/">Cp.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/exec.coffee/">Exec.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/kill.coffee/">Kill.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/load.coffee/">Load.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/login.coffee/">Login.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/logout.coffee/">Logout.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/pause.coffee/">Pause.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/pull.coffee/">Pull.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/restart.coffee/">Restart.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/rm.coffee/">Rm.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/rmi.coffee/">Rmi.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/run.coffee/">Run.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/save.coffee/">Save.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/service.coffee/">Service.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/start.coffee/">Start.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/status.coffee/">Status.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/stop.coffee/">Stop.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/unpause.coffee/">Unpause.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/volume_create.coffee/">Volume create.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/volume_rm.coffee/">Volume rm.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/wait.coffee/">Wait.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Compose</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../docker/compose/index.coffee/">Index.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>File</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/assert.coffee/">Assert.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/cache.coffee/">Cache.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/cson.coffee/">Cson.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/download.coffee/">Download.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/ini.coffee/">Ini.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/json.coffee/">Json.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/render.coffee/">Render.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/touch.coffee/">Touch.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/upload.coffee/">Upload.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/yaml.coffee/">Yaml.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Properties</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/properties/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/properties/read.coffee/">Read.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Types</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/types/ceph_conf.coffee/">Ceph conf.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/types/locale_gen.coffee/">Locale gen.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/types/pacman_conf.coffee/">Pacman conf.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/types/ssh_authorized_keys.coffee/">Ssh authorized keys.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/types/yum_repo.coffee/">Yum repo.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Etc group</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/types/etc_group/read.coffee/">Read.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Etc passwd</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../file/types/etc_passwd/read.coffee/">Read.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Fs</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/chmod.coffee/">Chmod.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/chown.coffee/">Chown.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/copy.coffee/">Copy.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/createReadStream.coffee/">createReadStream.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/exists.coffee/">Exists.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/lstat.coffee/">Lstat.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/mkdir.coffee/">Mkdir.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/readFile.coffee/">readFile.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/readlink.coffee/">Readlink.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/rename.coffee/">Rename.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/rmdir.coffee/">Rmdir.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/stat.coffee/">Stat.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/symlink.coffee/">Symlink.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/unlink.coffee/">Unlink.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../fs/writeFile.coffee/">writeFile.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Java</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../java/keystore_add.coffee/">Keystore add.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../java/keystore_remove.coffee/">Keystore remove.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Krb5</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../krb5/addprinc.coffee/">Addprinc.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../krb5/delprinc.coffee/">Delprinc.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../krb5/ktadd.coffee/">Ktadd.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../krb5/ticket.coffee/">Ticket.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Ktutil</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../krb5/ktutil/add.coffee/">Add.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Ldap</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ldap/acl.coffee/">Acl.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ldap/add.coffee/">Add.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ldap/delete.coffee/">Delete.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ldap/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ldap/schema.coffee/">Schema.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ldap/user.coffee/">User.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Log</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../log/cli.coffee/">Cli.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../log/csv.coffee/">Csv.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../log/fs.coffee/">Fs.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../log/md.coffee/">Md.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../log/stream.coffee/">Stream.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Misc</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../misc/conditions.coffee/">Conditions.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../misc/db.coffee/">Db.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../misc/diff.coffee/">Diff.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../misc/docker.coffee/">Docker.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../misc/krb5.coffee/">Krb5.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../misc/ldap.coffee/">Ldap.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../misc/os.coffee/">Os.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../misc/pidfile_running.coffee/">Pidfile running.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Service</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/assert.coffee/">Assert.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/discover.coffee/">Discover.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/init.coffee/">Init.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/install.coffee/">Install.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/remove.coffee/">Remove.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/restart.coffee/">Restart.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/start.coffee/">Start.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/startup.coffee/">Startup.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/status.coffee/">Status.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../service/stop.coffee/">Stop.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Ssh</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ssh/close.coffee/">Close.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ssh/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ssh/open.coffee/">Open.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ssh/root.coffee/">Root.coffee</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>System</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../cgroups.coffee/">Cgroups.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../chmod.coffee/">Chmod.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../chown.coffee/">Chown.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../copy.coffee/">Copy.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../discover.coffee/">Discover.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Limits.coffee</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#nikitasystemlimitsoptions-callback">nikita.system.limits(options, [callback])</a></li>
                
                    <li><a class="toctree-l4" href="#options">Options</a></li>
                
                    <li><a class="toctree-l4" href="#implemented-strategy">Implemented strategy</a></li>
                
                    <li><a class="toctree-l4" href="#ulimit">Ulimit</a></li>
                
                    <li><a class="toctree-l4" href="#ulimit-commands">Ulimit commands</a></li>
                
                    <li><a class="toctree-l4" href="#retrieve-current-information">Retrieve current information</a></li>
                
                    <li><a class="toctree-l4" href="#kernel-limits">Kernel Limits</a></li>
                
                    <li><a class="toctree-l4" href="#callback-parameters">Callback parameters</a></li>
                
                    <li><a class="toctree-l4" href="#source-code">Source Code</a></li>
                
                    <li><a class="toctree-l4" href="#dependencies">Dependencies</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../link.coffee/">Link.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../mkdir.coffee/">Mkdir.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../mod.coffee/">Mod.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../move.coffee/">Move.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../remove.coffee/">Remove.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tmpfs.coffee/">Tmpfs.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../uid_gid.coffee/">Uid gid.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Execute</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../execute/assert.coffee/">Assert.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../execute/index.coffee/">Index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Group</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../group/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../group/remove.coffee/">Remove.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>User</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../user/index.coffee/">Index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../user/remove.coffee/">Remove.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tools</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/backup.coffee/">Backup.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/compress.coffee/">Compress.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/extract.coffee/">Extract.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/git.coffee/">Git.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/iptables.coffee/">Iptables.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/repo.coffee/">Repo.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/sysctl.coffee/">Sysctl.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Rubygems</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/rubygems/fetch.coffee/">Fetch.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/rubygems/install.coffee/">Install.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tools/rubygems/remove.coffee/">Remove.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Wait</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../wait/execute.coffee/">Execute.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../wait/exist.coffee/">Exist.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../wait/index.coffee/">Index.coffee</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../context.coffee/">node-nikita</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../context.coffee/">Docs</a> &raquo;</li>
    
      
        
          <li>System &raquo;</li>
        
      
    
    <li>Limits.coffee</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="nikitasystemlimitsoptions-callback"><code>nikita.system.limits(options, [callback])</code></h1>
<p>Control system limits for a user.</p>
<h2 id="options">Options</h2>
<ul>
<li><code>target</code> (string) <br />
  Where to write the file, default to "/etc/security/limits.d/#{options.user}.conf".   </li>
<li><code>as</code> (int) <br />
  Address space limit (KB)   </li>
<li><code>core</code> (int) <br />
  Limits the core file size (KB)   </li>
<li><code>cpu</code>  (int) <br />
  CPU time limit (in seconds). <br />
  When the process reaches the soft limit, it receives a SIGXCPU every second. <br />
  When it reaches the hard limit, it receives SIGKILL.   </li>
<li><code>data</code> (int) <br />
  Max data size (KB)   </li>
<li><code>fsize</code> (int) <br />
  Maximum filesize (KB)   </li>
<li><code>locks</code> (int) <br />
  Max number of file locks the user can hold.   </li>
<li><code>maxlogins</code> (int) <br />
  Max number of logins for this user.   </li>
<li><code>maxsyslogins</code> (int) <br />
  Max number of logins on the system.   </li>
<li><code>memlock</code> (int) <br />
  Max locked-in-memory address space (KB)   </li>
<li><code>msgqueue</code> (int) <br />
  Max memory used by POSIX message queues (bytes)   </li>
<li><code>nice</code> (int: [-20, 19]) <br />
  Max nice priority allowed to raise to values   </li>
<li><code>nofile</code> (int) <br />
  Max number of open file descriptors   </li>
<li><code>nproc</code> (int) <br />
  Max number of processes   </li>
<li><code>priority</code> (int) <br />
  Priority to run user process with   </li>
<li><code>rss</code> (int) <br />
  Max resident set size (KB)   </li>
<li><code>sigpending</code> (int) <br />
  Max number of pending signals.   </li>
<li><code>stack</code> (int) <br />
  Max stack size (KB)   </li>
<li><code>rtprio</code> (int) <br />
  Max realtime priority.   </li>
<li><code>user</code> (string) <br />
  The user to apply the limit to   </li>
</ul>
<h2 id="implemented-strategy">Implemented strategy</h2>
<h3 id="nproc-and-nofile">nproc and nofile</h3>
<p>there is two cases, depending on the specified value</p>
<ol>
<li>int value</li>
</ol>
<p>If an int value is specified, then nikita checks that the value is lesser than 
the kernel limit. Please be aware that it is necessary but not sufficient to 
guarantee that the user would be able to open session.</p>
<ol>
<li>true value</li>
</ol>
<p>If a true value is specified, then nikita set it to 75% of the kernel limit.
This value is neither optimal nor able to guarantee that the user would be
able to open session, but that is the best nikita can automatically do.</p>
<h3 id="other-values">Other values</h3>
<p>Other values are not assessed by default.
They must be int typed, and no specific check is implemented.</p>
<h2 id="ulimit">Ulimit</h2>
<p>Linux allows to limit the resources allocated to users or user groups via
"/etc/security/limits.conf" and "/etc/security/limits.d/*.conf" files loaded by
WFP (Plugable Authentication Module) at each logon. The user can then adapt the
resources available to its needs via "ulimit".</p>
<p>It is possible to define, for a number of resources (number of open files, file size,
number of instantiated process, CPU time, etc.), a "soft" limit which can be
increased by user, via "ulimit" until a maximum "hard" limit.
The system does not exceed the value of the soft limit. If the user wants to push
this limit, it will set a new soft limit with ulimit.
The soft limit is always lower or equal to the hard limit.
In general, the limits applied to a user override those applied to a group.</p>
<h2 id="ulimit-commands">Ulimit commands</h2>
<p>The "S" option to "ulimit" impact the effective limit ("soft" limit) and the "H"
impact the "hard" limit (maximum value that can be defined by the user).</p>
<table>
<thead>
<tr>
<th>resource</th>
<th>soft</th>
<th>hard</th>
<th>unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>core file size</td>
<td>ulimit -Sc</td>
<td>ulimit -Hc</td>
<td>blocks</td>
</tr>
<tr>
<td>data seg size</td>
<td>ulimit -Sd</td>
<td>ulimit -Hd</td>
<td>kbytes</td>
</tr>
<tr>
<td>scheduling priority</td>
<td>ulimit -Se</td>
<td>ulimit -He</td>
<td></td>
</tr>
<tr>
<td>file size</td>
<td>ulimit -Sf</td>
<td>ulimit -Hf</td>
<td>blocks</td>
</tr>
<tr>
<td>max locked memory</td>
<td>ulimit -Sl</td>
<td>ulimit -Hl</td>
<td>kbytes</td>
</tr>
<tr>
<td>pending signals</td>
<td>ulimit -Si</td>
<td>ulimit -Hi</td>
<td></td>
</tr>
<tr>
<td>max memory size</td>
<td>ulimit -Sm</td>
<td>ulimit -Hm</td>
<td>kbytes</td>
</tr>
<tr>
<td>open files</td>
<td>ulimit -Sn</td>
<td>ulimit -Hn</td>
<td></td>
</tr>
<tr>
<td>pipe size</td>
<td>ulimit -Sp</td>
<td>ulimit -Hp</td>
<td>bytes</td>
</tr>
<tr>
<td>POSIX message queues</td>
<td>ulimit -Sq</td>
<td>ulimit -Hq</td>
<td>bytes</td>
</tr>
<tr>
<td>real-time priority</td>
<td>ulimit -Sr</td>
<td>ulimit -Hr</td>
<td></td>
</tr>
<tr>
<td>stack size</td>
<td>ulimit -Ss</td>
<td>ulimit -Hs</td>
<td>kbytes</td>
</tr>
<tr>
<td>cpu time</td>
<td>ulimit -St</td>
<td>ulimit -Ht</td>
<td>seconds</td>
</tr>
<tr>
<td>max user processes</td>
<td>ulimit -Su</td>
<td>ulimit -Hu</td>
<td></td>
</tr>
<tr>
<td>virtual memory</td>
<td>ulimit -Sv</td>
<td>ulimit -Hv</td>
<td>kbytes</td>
</tr>
<tr>
<td>file locks</td>
<td>ulimit -Sx</td>
<td>ulimit -Hx</td>
<td></td>
</tr>
</tbody>
</table>
<p>Pass the option in flag-mode to get, and follows it with a value to set.</p>
<h2 id="retrieve-current-information">Retrieve current information</h2>
<p>Number of sub-process for a process:</p>
<pre><code class="bash">pid=14986
ls /proc/$pid/task | wc
ps -L p $pid --no-headers | wc -l
</code></pre>

<p>Number of sub-process for a user:
The option "-L" show threads, possibly with LWP and NLWP columns.</p>
<pre><code class="bash">user=`whoami`
ps -L -u $user --no-headers | wc -l
</code></pre>

<h2 id="kernel-limits">Kernel Limits</h2>
<p>User limits cannot exceed kernel limits, so you need to configure kernel limits
before user limits.</p>
<h3 id="processes">Processes</h3>
<pre><code class="bash">sysctl kernel.pid_max         # print kernel.pid_max = VALUE
cat /proc/sys/kernel/pid_max  # print VALUE
</code></pre>

<p><em>Temporary change</em>: <code>echo 4194303 &gt; /proc/sys/kernel/pid_max</code></p>
<p><em>Permanent change</em>: <code>vi /etc/sysctl.conf # kernel.pid_max = 4194303</code></p>
<h3 id="open-files">Open Files</h3>
<pre><code class="bash">sysctl fs.file-max         # print fs.file-max = VALUE
cat /proc/sys/fs/file-max  # print VALUE
</code></pre>

<p><em>Temporary change</em>: <code>echo 1631017 &gt; /proc/sys/fs/file-max</code></p>
<p><em>Permanent change</em> : <code>vi /etc/sysctl.conf # fs.file-max = 1631017</code></p>
<h2 id="callback-parameters">Callback parameters</h2>
<ul>
<li><code>err</code> <br />
    Error object if any.   </li>
<li><code>status</code> <br />
    Value is "true" if limits configuration file has been modified.   </li>
</ul>
<h2 id="source-code">Source Code</h2>
<pre><code>module.exports = (options) -&gt;
  options.log message: "Entering system_limits", level: 'DEBUG', module: 'nikita/lib/system_limits'
  return callback Error "Incoherent options: both options system and user defined, #{JSON.stringify system: options.system, user: options.user}" if options.system and options.user
  options.user = '*' if options.system
  return callback Error "Missing required option 'user'" unless options.user
  options.target ?= "/etc/security/" + if options.user is '*' then "limits.conf" else "limits.d/#{options.user}.conf"
  write = []
  # Calculate nofile from kernel limit
  @system.execute
    cmd: "cat /proc/sys/fs/file-max"
    shy: true
    if: options.nofile?
  , (err, status, stdout) -&gt;
    # console.log err, status, stdout
    throw err if err
    return unless status
    kern_limit = parseInt stdout.trim()
    if options.nofile is true then options.nofile = Math.round kern_limit*0.75
    else if typeof options.nofile is 'number'
      throw Error "Invalid nofile options. Please set int value lesser than kernel limit: #{kern_limit}" if options.nofile &gt;= kern_limit
    else if typeof options.nofile is 'object'
      for _, v of options.nofile
        throw Error "Invalid nofile options. Please set int value lesser than kernel limit: #{kern_limit}" if v &gt;= kern_limit
  # Calculate nproc from kernel limit
  @system.execute
    cmd: "cat /proc/sys/kernel/pid_max"
    shy: true
    if: options.nproc?
  , (err, status, stdout) -&gt;
    throw err if err
    return unless status
    kern_limit = parseInt stdout.trim()
    if options.nproc is true then options.nproc = Math.round kern_limit*0.75
    else if typeof options.nproc is 'number'
      throw Error "Invalid nproc options. Please set int value lesser than kernel limit: #{kern_limit}" if options.nproc &gt;= kern_limit
    else if typeof options.nproc is 'object'
      for _, v of options.nproc
        throw Error "Invalid nproc options. Please set int value lesser than kernel limit: #{kern_limit}" if v &gt;= kern_limit
  @call -&gt;
    for opt in ['as', 'core', 'cpu', 'data', 'fsize', 'locks', 'maxlogins',
    'maxsyslogins', 'memlock', 'msgqueue', 'nice', 'nofile', 'nproc',
    'priority', 'rss', 'sigpending', 'stack', 'rtprio']
      if options[opt]?
        options[opt] = '-': options[opt] unless typeof options[opt] is 'object'
        for k in Object.keys options[opt]
          throw Error "Invalid option: #{JSON.stringify options[opt]}" unless k in ['soft', 'hard', '-']
          throw Error "Invalid option: #{options[opt][k]} not a number" unless (typeof options[opt][k] is 'number') or options[opt][k] is 'unlimited'
          write.push
            match: RegExp "^#{regexp.escape options.user} +#{regexp.escape k} +#{opt}.+$", 'm'
            replace: "#{options.user}    #{k}    #{opt}    #{options[opt][k]}"
            append: true
    return false
  @file
    target: options.target
    write: write
    eof: true
    uid: options.uid
    gid: options.gid
    if: -&gt; write.length
</code></pre>
<h2 id="dependencies">Dependencies</h2>
<pre><code>{regexp} = require '../misc'
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../link.coffee/" class="btn btn-neutral float-right" title="Link.coffee">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../discover.coffee/" class="btn btn-neutral" title="Discover.coffee"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../discover.coffee/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../link.coffee/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
