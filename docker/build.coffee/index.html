<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Build.coffee - node-nikita</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../context.coffee/">node-nikita</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../context.coffee/">Context.coffee</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../index.coffee/">Index.coffee</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../registry.coffee/">Registry.coffee</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Alt <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../alt/ldap_acl.coffee/">Ldap acl.coffee</a>
</li>

                        
                            
<li >
    <a href="../../alt/ldap_index.coffee/">Ldap index.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Connection <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../connection/assert.coffee/">Assert.coffee</a>
</li>

                        
                            
<li >
    <a href="../../connection/wait.coffee/">Wait.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Core <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../core/assert.coffee/">Assert.coffee</a>
</li>

                        
                            
<li >
    <a href="../../core/ping.coffee/">Ping.coffee</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Kv</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../core/kv/engine.coffee/">Engine.coffee</a>
</li>

        
            
<li >
    <a href="../../core/kv/get.coffee/">Get.coffee</a>
</li>

        
            
<li >
    <a href="../../core/kv/set.coffee/">Set.coffee</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Engines</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../core/kv/engines/memory.coffee/">Memory.coffee</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cron <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../cron/add.coffee/">Add.coffee</a>
</li>

                        
                            
<li >
    <a href="../../cron/remove.coffee/">Remove.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Db <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Database</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../db/database/exists.coffee/">Exists.coffee</a>
</li>

        
            
<li >
    <a href="../../db/database/index.coffee/">Index.coffee</a>
</li>

        
            
<li >
    <a href="../../db/database/remove.coffee/">Remove.coffee</a>
</li>

        
            
<li >
    <a href="../../db/database/wait.coffee/">Wait.coffee</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Schema</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../db/schema/index.coffee/">Index.coffee</a>
</li>

        
            
<li >
    <a href="../../db/schema/remove.coffee/">Remove.coffee</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">User</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../db/user/exists.coffee/">Exists.coffee</a>
</li>

        
            
<li >
    <a href="../../db/user/index.coffee/">Index.coffee</a>
</li>

        
            
<li >
    <a href="../../db/user/remove.coffee/">Remove.coffee</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docker <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Build.coffee</a>
</li>

                        
                            
<li >
    <a href="../checksum.coffee/">Checksum.coffee</a>
</li>

                        
                            
<li >
    <a href="../cp.coffee/">Cp.coffee</a>
</li>

                        
                            
<li >
    <a href="../exec.coffee/">Exec.coffee</a>
</li>

                        
                            
<li >
    <a href="../kill.coffee/">Kill.coffee</a>
</li>

                        
                            
<li >
    <a href="../load.coffee/">Load.coffee</a>
</li>

                        
                            
<li >
    <a href="../login.coffee/">Login.coffee</a>
</li>

                        
                            
<li >
    <a href="../logout.coffee/">Logout.coffee</a>
</li>

                        
                            
<li >
    <a href="../pause.coffee/">Pause.coffee</a>
</li>

                        
                            
<li >
    <a href="../pull.coffee/">Pull.coffee</a>
</li>

                        
                            
<li >
    <a href="../restart.coffee/">Restart.coffee</a>
</li>

                        
                            
<li >
    <a href="../rm.coffee/">Rm.coffee</a>
</li>

                        
                            
<li >
    <a href="../rmi.coffee/">Rmi.coffee</a>
</li>

                        
                            
<li >
    <a href="../run.coffee/">Run.coffee</a>
</li>

                        
                            
<li >
    <a href="../save.coffee/">Save.coffee</a>
</li>

                        
                            
<li >
    <a href="../service.coffee/">Service.coffee</a>
</li>

                        
                            
<li >
    <a href="../start.coffee/">Start.coffee</a>
</li>

                        
                            
<li >
    <a href="../status.coffee/">Status.coffee</a>
</li>

                        
                            
<li >
    <a href="../stop.coffee/">Stop.coffee</a>
</li>

                        
                            
<li >
    <a href="../unpause.coffee/">Unpause.coffee</a>
</li>

                        
                            
<li >
    <a href="../volume_create.coffee/">Volume create.coffee</a>
</li>

                        
                            
<li >
    <a href="../volume_rm.coffee/">Volume rm.coffee</a>
</li>

                        
                            
<li >
    <a href="../wait.coffee/">Wait.coffee</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Compose</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../compose/index.coffee/">Index.coffee</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">File <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../file/assert.coffee/">Assert.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/cache.coffee/">Cache.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/cson.coffee/">Cson.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/download.coffee/">Download.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/index.coffee/">Index.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/ini.coffee/">Ini.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/json.coffee/">Json.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/render.coffee/">Render.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/touch.coffee/">Touch.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/upload.coffee/">Upload.coffee</a>
</li>

                        
                            
<li >
    <a href="../../file/yaml.coffee/">Yaml.coffee</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Properties</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../file/properties/index.coffee/">Index.coffee</a>
</li>

        
            
<li >
    <a href="../../file/properties/read.coffee/">Read.coffee</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Types</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../file/types/ceph_conf.coffee/">Ceph conf.coffee</a>
</li>

        
            
<li >
    <a href="../../file/types/locale_gen.coffee/">Locale gen.coffee</a>
</li>

        
            
<li >
    <a href="../../file/types/pacman_conf.coffee/">Pacman conf.coffee</a>
</li>

        
            
<li >
    <a href="../../file/types/ssh_authorized_keys.coffee/">Ssh authorized keys.coffee</a>
</li>

        
            
<li >
    <a href="../../file/types/yum_repo.coffee/">Yum repo.coffee</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Etc group</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../file/types/etc_group/read.coffee/">Read.coffee</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Etc passwd</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../file/types/etc_passwd/read.coffee/">Read.coffee</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Fs <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../fs/chmod.coffee/">Chmod.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/chown.coffee/">Chown.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/copy.coffee/">Copy.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/createReadStream.coffee/">createReadStream.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/exists.coffee/">Exists.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/lstat.coffee/">Lstat.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/mkdir.coffee/">Mkdir.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/readFile.coffee/">readFile.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/readlink.coffee/">Readlink.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/rename.coffee/">Rename.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/rmdir.coffee/">Rmdir.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/stat.coffee/">Stat.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/symlink.coffee/">Symlink.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/unlink.coffee/">Unlink.coffee</a>
</li>

                        
                            
<li >
    <a href="../../fs/writeFile.coffee/">writeFile.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Java <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../java/keystore_add.coffee/">Keystore add.coffee</a>
</li>

                        
                            
<li >
    <a href="../../java/keystore_remove.coffee/">Keystore remove.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Krb5 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../krb5/addprinc.coffee/">Addprinc.coffee</a>
</li>

                        
                            
<li >
    <a href="../../krb5/delprinc.coffee/">Delprinc.coffee</a>
</li>

                        
                            
<li >
    <a href="../../krb5/ktadd.coffee/">Ktadd.coffee</a>
</li>

                        
                            
<li >
    <a href="../../krb5/ticket.coffee/">Ticket.coffee</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Ktutil</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../krb5/ktutil/add.coffee/">Add.coffee</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ldap <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../ldap/acl.coffee/">Acl.coffee</a>
</li>

                        
                            
<li >
    <a href="../../ldap/add.coffee/">Add.coffee</a>
</li>

                        
                            
<li >
    <a href="../../ldap/delete.coffee/">Delete.coffee</a>
</li>

                        
                            
<li >
    <a href="../../ldap/index.coffee/">Index.coffee</a>
</li>

                        
                            
<li >
    <a href="../../ldap/schema.coffee/">Schema.coffee</a>
</li>

                        
                            
<li >
    <a href="../../ldap/user.coffee/">User.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Log <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../log/cli.coffee/">Cli.coffee</a>
</li>

                        
                            
<li >
    <a href="../../log/csv.coffee/">Csv.coffee</a>
</li>

                        
                            
<li >
    <a href="../../log/fs.coffee/">Fs.coffee</a>
</li>

                        
                            
<li >
    <a href="../../log/md.coffee/">Md.coffee</a>
</li>

                        
                            
<li >
    <a href="../../log/stream.coffee/">Stream.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Misc <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../misc/conditions.coffee/">Conditions.coffee</a>
</li>

                        
                            
<li >
    <a href="../../misc/db.coffee/">Db.coffee</a>
</li>

                        
                            
<li >
    <a href="../../misc/diff.coffee/">Diff.coffee</a>
</li>

                        
                            
<li >
    <a href="../../misc/docker.coffee/">Docker.coffee</a>
</li>

                        
                            
<li >
    <a href="../../misc/krb5.coffee/">Krb5.coffee</a>
</li>

                        
                            
<li >
    <a href="../../misc/ldap.coffee/">Ldap.coffee</a>
</li>

                        
                            
<li >
    <a href="../../misc/os.coffee/">Os.coffee</a>
</li>

                        
                            
<li >
    <a href="../../misc/pidfile_running.coffee/">Pidfile running.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Service <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../service/assert.coffee/">Assert.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/discover.coffee/">Discover.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/index.coffee/">Index.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/init.coffee/">Init.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/install.coffee/">Install.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/remove.coffee/">Remove.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/restart.coffee/">Restart.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/start.coffee/">Start.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/startup.coffee/">Startup.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/status.coffee/">Status.coffee</a>
</li>

                        
                            
<li >
    <a href="../../service/stop.coffee/">Stop.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ssh <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../ssh/close.coffee/">Close.coffee</a>
</li>

                        
                            
<li >
    <a href="../../ssh/index.coffee/">Index.coffee</a>
</li>

                        
                            
<li >
    <a href="../../ssh/open.coffee/">Open.coffee</a>
</li>

                        
                            
<li >
    <a href="../../ssh/root.coffee/">Root.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">System <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../system/cgroups.coffee/">Cgroups.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/chmod.coffee/">Chmod.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/chown.coffee/">Chown.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/copy.coffee/">Copy.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/discover.coffee/">Discover.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/limits.coffee/">Limits.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/link.coffee/">Link.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/mkdir.coffee/">Mkdir.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/mod.coffee/">Mod.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/move.coffee/">Move.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/remove.coffee/">Remove.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/tmpfs.coffee/">Tmpfs.coffee</a>
</li>

                        
                            
<li >
    <a href="../../system/uid_gid.coffee/">Uid gid.coffee</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Execute</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../system/execute/assert.coffee/">Assert.coffee</a>
</li>

        
            
<li >
    <a href="../../system/execute/index.coffee/">Index.coffee</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Group</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../system/group/index.coffee/">Index.coffee</a>
</li>

        
            
<li >
    <a href="../../system/group/remove.coffee/">Remove.coffee</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">User</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../system/user/index.coffee/">Index.coffee</a>
</li>

        
            
<li >
    <a href="../../system/user/remove.coffee/">Remove.coffee</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../tools/backup.coffee/">Backup.coffee</a>
</li>

                        
                            
<li >
    <a href="../../tools/compress.coffee/">Compress.coffee</a>
</li>

                        
                            
<li >
    <a href="../../tools/extract.coffee/">Extract.coffee</a>
</li>

                        
                            
<li >
    <a href="../../tools/git.coffee/">Git.coffee</a>
</li>

                        
                            
<li >
    <a href="../../tools/iptables.coffee/">Iptables.coffee</a>
</li>

                        
                            
<li >
    <a href="../../tools/repo.coffee/">Repo.coffee</a>
</li>

                        
                            
<li >
    <a href="../../tools/sysctl.coffee/">Sysctl.coffee</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Rubygems</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../tools/rubygems/fetch.coffee/">Fetch.coffee</a>
</li>

        
            
<li >
    <a href="../../tools/rubygems/install.coffee/">Install.coffee</a>
</li>

        
            
<li >
    <a href="../../tools/rubygems/remove.coffee/">Remove.coffee</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Wait <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../wait/execute.coffee/">Execute.coffee</a>
</li>

                        
                            
<li >
    <a href="../../wait/exist.coffee/">Exist.coffee</a>
</li>

                        
                            
<li >
    <a href="../../wait/index.coffee/">Index.coffee</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../../db/user/remove.coffee/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../checksum.coffee/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#nikitadockerbuildoptions-callback">nikita.docker.build(options, [callback])</a></li>
        
            <li><a href="#options">Options</a></li>
        
            <li><a href="#callback-parameters">Callback parameters</a></li>
        
            <li><a href="#example">Example</a></li>
        
            <li><a href="#source-code">Source Code</a></li>
        
            <li><a href="#modules-dependencies">Modules Dependencies</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="nikitadockerbuildoptions-callback"><code>nikita.docker.build(options, [callback])</code></h1>
<p>Build docker repository from Dockerfile, from content or from current working
directory (exclusive options).</p>
<p>The user can choose whether the build is local or on the remote.
Options are the same than docker build command with nikita's one.
Be aware than you can not use ADD with content option because docker build
from STDIN does not support a context.</p>
<p>By default docker always run the build and overwrite existing repositories.
Status unmodified if the repository is identical to a previous one</p>
<h2 id="options">Options</h2>
<ul>
<li><code>boot2docker</code> (boolean) <br />
  Whether to use boot2docker or not, default to false.</li>
<li><code>image</code> (string) <br />
  Name of the image, required.</li>
<li><code>tag</code> (string) <br />
  Tag of the image.</li>
<li><code>machine</code> (string) <br />
  Name of the docker-machine, required if using docker-machine.</li>
<li><code>file</code> <br />
  Path to Dockerfile.</li>
<li><code>content</code> (string | [string]) <br />
  Use this text to build the repository.</li>
<li><code>quiet</code> (boolean) <br />
  Suppress the verbose output generated by the containers. Default to false</li>
<li><code>rm</code> (boolean) <br />
  Remove intermediate containers after build, default to true.</li>
<li><code>force_rm</code> (boolean) <br />
  Always remove intermediate containers during build, default to false.</li>
<li><code>no_cache</code> (boolean) <br />
  Do not use cache when building the repository, default to false.</li>
<li><code>build_arg</code> ("k=v" | []) <br />
  Send arguments to the build (Must match an ARG command).</li>
<li><code>cwd</code> (string) <br />
  change the working directory for the build.</li>
</ul>
<h2 id="callback-parameters">Callback parameters</h2>
<ul>
<li><code>err</code> <br />
  Error object if any.   </li>
<li><code>status</code> <br />
  True if image was successfully built.   </li>
<li><code>checksum</code> <br />
  Image cheksum if built.   </li>
<li><code>stdout</code> <br />
  Stdout value(s) unless <code>stdout</code> option is provided.   </li>
<li><code>stderr</code> <br />
  Stderr value(s) unless <code>stderr</code> option is provided.   </li>
</ul>
<h2 id="example">Example</h2>
<h3 id="builds-a-repository-from-dockerfile-without-any-resourcess">Builds a repository from dockerfile without any resourcess</h3>
<pre><code class="javascript">nikita.docker.build({
  image: 'ryba/targe-build',
  source: '/home/ryba/Dockerfile'
}, function(err, status, stdout, stderr){
  console.log( err ? err.message : 'Container built: ' + status);
});
</code></pre>

<h3 id="builds-an-repository-from-dockerfile-with-external-resources">Builds an repository from dockerfile with external resources</h3>
<p>In this case nikita download all the external files into a resources directory in the same location
than the Dockerfile. The Dockerfile content:</p>
<pre><code class="dockerfile">FROM centos7
ADD resources/package.tar.gz /tmp/
ADD resources/configuration.sh /tmp/
</code></pre>

<p>Build directory tree :</p>
<pre><code>├── Dockerfile
├── resources
│   ├── package.tar.gz
│   ├── configuration.sh
</code></pre>

<pre><code class="javascript">nikita.docker.build({
  ssh: ssh
  tag: 'ryba/target-build'
  source: '/home/ryba/Dockerfile'
  resources: ['http://url.com/package.tar.gz/','/home/configuration.sh']
}, function(err, status, stdout, stderr){
  console.log( err ? err.message : 'Container built: ' + status);
});
</code></pre>

<h3 id="builds-an-repository-from-stdin">Builds an repository from stdin</h3>
<pre><code class="javascript">nikita.docker.build({
  ssh: ssh,
  tag: 'ryba/target-build'
  content: &quot;FROM ubuntu\nRUN echo 'helloworld'&quot;
}, function(err, is_built, stdout, stderr){
  console.log( err ? err.message : 'Container built: ' + status);
});
</code></pre>

<h2 id="source-code">Source Code</h2>
<pre><code>module.exports = (options, callback) -&gt;
  options.log message: "Entering Docker build", level: 'DEBUG', module: 'nikita/lib/docker/build'
  # SSH connection
  ssh = @ssh options.ssh
  # Global options
  options.docker ?= {}
  options[k] ?= v for k, v of options.docker
  # Validation
  return callback Error 'Required option "image"' unless options.image?
  return callback Error 'Can not build from Dockerfile and content' if options.content? and options.file?
  options.rm ?= true
  cmd = 'build'
  number_of_step = 0
  userargs = []
  # status unmodified if final tag already exists
  dockerfile_cmds = ['CMD','LABEL','EXPOSE','ENV','ADD','COPY','ENTRYPOINT',
   'VOLUME','USER','WORKDIR','ARG','ONBUILD','RUN','STOPSIGNAL','MAINTAINER']
  source = null
  if options.file
    source = options.file
  else if options.cwd
    source = "#{options.cwd}/Dockerfile"
  options.cwd ?= path.dirname options.file if options.file
  # Apply search and replace to content
  # options.write ?= []
  # if options.from? or options.to? or options.match? or options.replace? or options.before?
  #   options.write.push
  #     from: options.from
  #     to: options.to
  #     match: options.match
  #     replace: options.replace
  #     append: options.append
  #     before: options.before
  #   options.append = false
  # Build cmd
  for opt in ['force_rm', 'quiet', 'no_cache']
    cmd += " --#{opt.replace '_', '-'}" if options[opt]
  for opt in ['build_arg'] then if options[opt]?
    if Array.isArray options[opt]
      cmd += " --#{opt.replace '_', '-'} #{k}" for k in options[opt]
    else
      cmd += " --#{opt.replace '_', '-'} #{options[opt]}"
  cmd += " --rm=#{if options.rm then 'true' else 'false'}"
  cmd += " -t \"#{options.image}#{if options.tag then ":#{options.tag}" else ''}\""
  # custom command for content option0
  options.file ?= path.resolve options.cwd, 'Dockerfile' if options.cwd
  if options.content?
    options.log message: "Building from text: Docker won't have a context. ADD/COPY not working", level: 'WARN', module: 'nikita/docker/build'
    cmd += " - &lt;&lt;DOCKERFILE\n#{options.content}\nDOCKERFILE" if options.content?
  else if options.file?
    options.log message: "Building from Dockerfile: \"#{options.file}\"", level: 'INFO', module: 'nikita/docker/build'
    cmd += " -f #{options.file} #{options.cwd}"
  else
    options.log message: "Building from CWD", level: 'INFO', module: 'nikita/docker/build'
    cmd += ' .'
  @file
    if: options.content
    content: options.content
    source: source
    target: (content) -&gt;
      options.content = content
    from: options.from
    to: options.to
    match: options.match
    replace: options.replace
    append: options.append
    before: options.before
    write: options.write
  @call # Read Dockerfile if necessary to count steps
    unless: options.content
    handler: (_, callback) -&gt;
      options.log message: "Reading Dockerfile from : #{options.file}", level: 'INFO', module: 'nikita/lib/build'
      @fs.readFile ssh: options.ssh, target: options.file, encoding: 'utf8', (err, content) -&gt;
        return callback err if err
        options.content = content
        callback()
  @call -&gt; # Count steps
    for line in string.lines options.content
      number_of_step++ if /^(.*?)\s/.exec(line)?[1] in dockerfile_cmds
  @system.execute
    cmd: docker.wrap options, cmd
    cwd: options.cwd
  , (err, executed, stdout, stderr) -&gt;
    throw err if err
    container_id_hash = null
    lines = string.lines stderr
    lines = string.lines stdout
    number_of_cache = 0
    for k,  line of lines
      if (line.indexOf('Using cache') isnt  -1 )
        number_of_cache = number_of_cache + 1
      if (line.indexOf('Successfully built') isnt  -1 )
        container_id_hash = line.split(' ').pop().toString()
    userargs = [number_of_step isnt number_of_cache, container_id_hash, stdout, stderr]
  @next (err, status) -&gt;
    return callback err if err
    options.log if userargs[0]
    then message: "New image id #{userargs[1]}", level: 'INFO', module: 'nikita/lib/docker/build' 
    else message: "Identical image id #{userargs[1]}", level: 'INFO', module: 'nikita/lib/docker/build'
    callback null, userargs...
</code></pre>
<h2 id="modules-dependencies">Modules Dependencies</h2>
<pre><code>docker = require '../misc/docker'
string = require '../misc/string'
path = require 'path'
util = require 'util'
{merge} = require '../misc'
</code></pre></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
